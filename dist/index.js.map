{"version":3,"file":"index.js","sources":["../packages/core/array.ts","../packages/core/string.ts","../packages/core/dom.ts","../packages/core/object.ts","../packages/react/hooks/useDynamicPanel.ts","../packages/react/hooks/usePrevious.ts"],"sourcesContent":["export const interweave = <T>([key, ...extras]: T[], values: T[] = []): T[] =>\n\tkey === undefined ? values : [key, ...interweave(values, extras)]\n\nexport const range = (\n\tstart: number,\n\tend: number,\n\tstep: number = 1\n): number[] => {\n\treturn Array.from(\n\t\t{ length: (end - start) / step + 1 },\n\t\t(_, i) => start + i * step\n\t)\n}\n","export const kebabize = (str: string) => {\n\treturn str\n\t\t.replaceAll(\" \", \"-\")\n\t\t.split(\"\")\n\t\t.map((letter, index) => {\n\t\t\tif (letter === \"-\") {\n\t\t\t\treturn \"-\"\n\t\t\t}\n\n\t\t\treturn letter.toUpperCase() === letter\n\t\t\t\t? `${index !== 0 ? \"-\" : \"\"}${letter.toLowerCase()}`\n\t\t\t\t: letter\n\t\t})\n\t\t.join(\"\")\n}\n\nexport const capitalize = (word: string) => {\n\treturn word.charAt(0).toUpperCase() + word.slice(1)\n}\n","import { kebabize } from \"./string\"\n\ninterface Mods {\n\t[key: string]: any\n}\n\nexport const generateMods = (mods: Mods): string[] => {\n\tconst keys = Object.keys(mods)\n\n\tif (keys.length === 0) {\n\t\treturn [\"\"]\n\t}\n\n\treturn keys\n\t\t.map(key => {\n\t\t\tconst value = mods[key]\n\n\t\t\tif (value === true) {\n\t\t\t\treturn kebabize(key)\n\t\t\t}\n\n\t\t\tif (!value) {\n\t\t\t\treturn \"\"\n\t\t\t}\n\n\t\t\treturn `${kebabize(key)}-${\n\t\t\t\ttypeof value === \"number\" ? value : kebabize(value)\n\t\t\t}`\n\t\t})\n\t\t.filter(Boolean)\n}\n\nexport const smoothScrollTo = (elementID: string) => {\n\tconst element = document.getElementById(elementID)\n\tif (element) {\n\t\telement.scrollIntoView({ behavior: \"smooth\" })\n\t}\n}\n","export const deepCopy = <T>(object: T): T => {\n\tif (object === null || typeof object !== \"object\") {\n\t\treturn object\n\t}\n\n\tif (Array.isArray(object)) {\n\t\treturn object.map(item => deepCopy(item)) as any\n\t}\n\n\tconst copiedObject = {} as T\n\tfor (const key in object) {\n\t\t// @ts-ignore\n\t\tif (object.hasOwnProperty(key)) {\n\t\t\tcopiedObject[key] = deepCopy(object[key])\n\t\t}\n\t}\n\treturn copiedObject\n}\n\nexport const omitFields = <T, Fields extends keyof T>(\n\tobject: T,\n\tfields: Fields[]\n): Omit<T, Fields> => {\n\treturn Object.assign(\n\t\t{},\n\t\tobject,\n\t\tObject.assign({}, ...fields.map(key => ({ [key]: undefined })))\n\t)\n}\n\nexport const pickFields = <T, Fields extends keyof T>(\n\tobject: T,\n\tfields: Fields[]\n): Pick<T, Fields> => {\n\tconst newObject = {} as Pick<T, Fields>\n\tfor (const field of fields) {\n\t\tnewObject[field] = object[field]\n\t}\n\treturn newObject\n}\n\nexport const removeFields = <T, Fields extends keyof T>(\n\tobject: T,\n\tfields: Fields[]\n): Pick<T, Exclude<keyof T, Fields>> => {\n\tconst newObject = deepCopy(object)\n\tfor (const field of fields) {\n\t\tdelete newObject[field]\n\t}\n\treturn newObject\n}\n","import { useRef, useState, useEffect, RefObject, MouseEvent } from \"react\"\n\nexport interface DynamicPanel<ElementType> {\n\tref: RefObject<ElementType>\n\tisOpen: boolean\n\ttoggle: (ev?: MouseEvent) => void\n\topen: (ev?: MouseEvent) => void\n\tclose: (ev?: MouseEvent) => void\n}\n\nexport const useDynamicPanel = <\n\tElementType extends Element\n>(): DynamicPanel<ElementType> => {\n\tconst ref = useRef<ElementType>(null)\n\tconst [isOpen, setIsOpen] = useState(false)\n\n\tconst handleWindowClick = (ev: MouseEvent) => {\n\t\tif (\n\t\t\tref.current &&\n\t\t\ttypeof ref.current?.contains === \"function\" &&\n\t\t\t!ref.current.contains(ev.target as Node)\n\t\t) {\n\t\t\tclose(ev)\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tif (typeof window !== \"undefined\" && ref.current && isOpen) {\n\t\t\t// I'm not really sure why TS is complaining here. It says that the\n\t\t\t// handleWindowClick function is invalid because it doesn't match the\n\t\t\t// signature of the event listener, which it supposes to be\n\t\t\t// (Window, MouseEvent), but if you log the arguments, you see\n\t\t\t// that only one is passed: MouseEvent (technically an instance\n\t\t\t// of PointerEvent, actually).\n\t\t\t//\n\t\t\t// @ts-ignore\n\t\t\twindow.addEventListener(\"click\", handleWindowClick)\n\t\t}\n\n\t\treturn () => {\n\t\t\t// @ts-ignore\n\t\t\twindow.removeEventListener(\"click\", handleWindowClick)\n\t\t}\n\t}, [ref.current, isOpen])\n\n\tconst open = (ev?: MouseEvent) => {\n\t\tif (ev) {\n\t\t\tev.stopPropagation()\n\t\t}\n\n\t\tsetIsOpen(true)\n\t}\n\n\tconst close = (ev?: MouseEvent) => {\n\t\tif (ev) {\n\t\t\tev.stopPropagation()\n\t\t}\n\n\t\tsetIsOpen(false)\n\t}\n\n\tconst toggle = (ev?: MouseEvent) => {\n\t\tif (ev) {\n\t\t\tev.stopPropagation()\n\t\t}\n\n\t\tsetIsOpen(isOpen => !isOpen)\n\t}\n\n\treturn {\n\t\tref,\n\t\tisOpen,\n\t\topen,\n\t\tclose,\n\t\ttoggle,\n\t}\n}\n","// This hook tracks the state changes of `value`\n// and returns the previously saved value.\n\nimport { useRef, useEffect } from \"react\"\n\nexport const usePrevious = <T>(value: T): T => {\n\tconst ref = useRef<T>()\n\n\tuseEffect(() => {\n\t\tref.current = value\n\t}, [])\n\n\tif (ref.current) {\n\t\treturn ref.current\n\t}\n\n\treturn value\n}"],"names":["interweave","values","key","extras","undefined","range","start","end","step","Array","from","length","_","i","kebabize","str","replaceAll","split","map","letter","index","toUpperCase","toLowerCase","join","capitalize","word","charAt","slice","generateMods","mods","keys","Object","value","filter","Boolean","smoothScrollTo","elementID","element","document","getElementById","scrollIntoView","behavior","deepCopy","object","isArray","item","copiedObject","hasOwnProperty","omitFields","fields","assign","pickFields","newObject","field","removeFields","useDynamicPanel","ref","useRef","useState","isOpen","setIsOpen","handleWindowClick","ev","current","contains","target","close","useEffect","window","addEventListener","removeEventListener","open","stopPropagation","toggle","usePrevious"],"mappings":"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"}